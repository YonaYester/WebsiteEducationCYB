<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>AES Typing Test Challenge</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f4f4;
      margin: 0;
      padding: 20px;
      text-align: center; /* Overall center alignment for the page content */
    }
    /* Header with Home Button */
    #header {
      position: relative;
      margin-bottom: 20px;
      padding-bottom: 10px;
      border-bottom: 1px solid #ccc;
    }
    #homeButton {
      position: absolute;
      left: 0;
      top: 0;
      background: #2ecc71;
      color: white;
      padding: 10px 20px;
      border-radius: 5px;
      text-decoration: none;
      font-size: 16px;
    }
    h1 {
      margin: 0;
      padding-top: 10px;
      color: #333;
    }
    /* Instruction Section at the Top, center-aligned */
    .instruction-section {
      background: #fff;
      max-width: 700px;
      margin: 20px auto;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      text-align: center; /* Center the instruction text */
    }
    .instruction-section h2 {
      margin-top: 0;
    }
    .instruction-section p, .instruction-section ol {
      font-size: 18px;
      line-height: 1.6;
      margin: 10px 0;
    }
    .instruction-section ol {
      list-style: decimal inside; /* So the bullets are inside, still centered */
      padding: 0;
      margin: 10px auto;
      max-width: 500px; /* Keep steps narrow while centered */
    }
    /* Main Container: Typing Test Area and Scoreboard */
    .main-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 20px;
      max-width: 1000px;
      margin: 20px auto;
    }
    /* Typing Test Area */
    .typing-section {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      flex: 1;
      max-width: 600px;
      text-align: center;
      position: relative;
    }
    #countdown {
      font-size: 72px;
      font-weight: bold;
      color: #e74c3c;
      margin: 20px;
      transition: opacity 0.5s;
    }
    #typingBox {
      width: 90%;
      padding: 10px;
      font-size: 18px;
      margin-top: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      cursor: pointer;
    }
    #finishBtn, #startBtn {
      padding: 10px 15px;
      font-size: 18px;
      margin-top: 10px;
      cursor: pointer;
      border: none;
      background: #3498db;
      color: white;
      border-radius: 5px;
    }
    /* Scoreboard Section */
    .scoreboard {
      background: #fff;
      padding: 20px;
      border-radius: 8px;
      box-shadow: 0 2px 6px rgba(0,0,0,0.1);
      max-width: 300px;
      text-align: left;
      margin: auto;
    }
    .scoreboard h3 {
      margin-top: 0;
      font-size: 20px;
      color: #333;
    }
    .scoreboard ul {
      list-style: none;
      padding: 0;
      margin: 0;
      font-size: 18px;
    }
    .scoreboard li {
      padding: 5px 0;
      border-bottom: 1px solid #ddd;
    }
    /* Bottom Explanation Section */
    .bottom-section {
      margin-top: 30px;
      display: none;
      text-align: center;
    }
    .bottom-section .explanation {
      font-size: 18px;
      line-height: 1.6;
      text-align: left;
      max-width: 700px;
      margin: 0 auto 15px auto;
    }
    .bottom-section .explanation ol {
      margin-left: 20px;
      margin-top: 10px;
    }
    .bottom-section .explanation li {
      margin-bottom: 8px;
    }
    .bottom-section img {
      max-width: 500px;
      border: 1px solid #ccc;
      border-radius: 5px;
      margin-top: 10px;
    }
    .bottom-section a {
      font-weight: bold;
      text-decoration: none;
      color: #3498db;
      font-size: 18px;
    }
    .bottom-section a:hover {
      text-decoration: underline;
    }
  </style>
</head>
<body>
  <!-- Header Section -->
  <div id="header">
    <a id="homeButton" href="index.html">Home</a>
    <h1>AES Typing Test Challenge</h1>
  </div>

  <!-- Instruction Section at the Top -->
  <div class="instruction-section">
    <h2>Welcome to the AES Typing Test Challenge!</h2>
    <p>
      Your task is to type the following AES round steps as quickly and accurately as possible:
    </p>
    <!-- AES steps in BLUE and bold -->
    <p style="font-weight: bold; font-size: 20px; color: blue;">
      SubBytes ShiftRows MixColumns AddRoundKey
    </p>
    <ol>
      <li>Click the "Start" button below to begin the countdown.</li>
      <li>Watch the countdown from 3 to 0 as it fades in and out.</li>
      <li>When the countdown finishes, the typing box will activate and the timer will start.</li>
      <li>Type the AES round operations in order (separated by spaces) exactly as shown.</li>
      <li>Click the "Finish Test" button when you have finished.</li>
      <li>Your time will be recorded on the scoreboard, and you can try again to beat your best time.</li>
    </ol>
  </div>

  <!-- Main Container: Typing Test Area and Scoreboard -->
  <div class="main-container">
    <!-- Typing Test Area -->
    <div class="typing-section">
      <button id="startBtn">Start</button>
      <div id="countdown"></div>
      <input id="typingBox" type="text" placeholder="Type here..." disabled>
      <br>
      <button id="finishBtn" disabled>Finish Test</button>
    </div>
    <!-- Scoreboard Area -->
    <div class="scoreboard">
      <h3>Your Times</h3>
      <ul id="scoreList">
        <!-- Recorded times will appear here -->
      </ul>
    </div>
  </div>

   <!-- Bottom Explanation Section (Revealed Upon Success) -->
   <div id="bottomContent" class="bottom-section">
    <div class="explanation">
      <strong>Explanation:</strong>
      <ol>
        <li>
          <strong>SubBytes:</strong> Uses a non‑linear S‑box to substitute each byte, introducing crucial confusion into the state.
        </li>
        <li>
          <strong>ShiftRows:</strong> Cyclically shifts each row of the 4×4 state matrix to the left, providing diffusion across columns.
        </li>
        <li>
          <strong>MixColumns:</strong> Treats each column as a four‑term polynomial and multiplies it modulo a fixed polynomial, further mixing the bytes for strong diffusion.
        </li>
        <li>
          <strong>AddRoundKey:</strong> XORs the current state with a round key derived from the original AES key, integrating the secret key material.
        </li>
        <li>
          <strong>Why It Matters:</strong> Each AES round step must be applied in precisely the right order. Even a single out‑of‑place operation breaks the entire encryption process and compromises security.
        </li>
        <li>
          <strong>Implementation Languages:</strong> AES implementations exist in many languages—C, C++, Java, Rust, Python, Go, and assembly—for use in everything from web browsers to embedded systems.
        </li>
      </ol>
    </div>
    <!-- Placeholder Image -->
    <img src="img/aespng.png" alt="AES Documentation Placeholder Image">
    <!-- Bold Link Below the Image -->
    <p style="margin-top: 10px;">
      <a href="https://www.techtarget.com/searchsecurity/definition/Advanced-Encryption-Standard" target="_blank">
        For more information about AES, click here
      </a>
    </p>
  </div>

  <script>
    const startBtn = document.getElementById("startBtn");
    const countdownEl = document.getElementById("countdown");
    const typingBox = document.getElementById("typingBox");
    const finishBtn = document.getElementById("finishBtn");
    const scoreList = document.getElementById("scoreList");
    const bottomContent = document.getElementById("bottomContent");

    // The target text (case-insensitive)
    const expectedText = "subbytes shiftrows mixcolumns addroundkey";

    let startTime = 0, endTime = 0, countdownInterval;

    // Start Button
    startBtn.addEventListener("click", () => {
      startBtn.style.display = "none"; // Hide the start button
      let count = 3;
      countdownEl.textContent = count;
      countdownEl.style.opacity = 1;
      
      countdownInterval = setInterval(() => {
        // Fade out/in effect
        countdownEl.style.transition = "opacity 0.5s";
        countdownEl.style.opacity = 0;
        setTimeout(() => {
          count--;
          if (count > 0) {
            countdownEl.textContent = count;
            countdownEl.style.opacity = 1;
          } else {
            clearInterval(countdownInterval);
            countdownEl.textContent = "";
            typingBox.disabled = false;
            finishBtn.disabled = false;
            typingBox.focus();
            startTime = performance.now(); // Start timing
          }
        }, 500);
      }, 1000);
    });

    // Finish Button
    finishBtn.addEventListener("click", () => {
      endTime = performance.now();
      const userInput = typingBox.value.trim().toLowerCase();
      if (userInput === expectedText) {
        const timeTaken = ((endTime - startTime) / 1000).toFixed(2);
        const li = document.createElement("li");
        li.textContent = timeTaken + " seconds";
        scoreList.appendChild(li);
        bottomContent.style.display = "block";
        bottomContent.scrollIntoView({ behavior: "smooth" });
      } else {
        alert("The typed text does not match the target. Please try again.");
      }
      // Reset for next attempt
      finishBtn.disabled = true;
      typingBox.disabled = true;
      typingBox.value = "";
      // Show the start button again
      startBtn.style.display = "inline-block";
    });
  </script>
</body>
</html>
